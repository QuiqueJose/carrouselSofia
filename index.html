<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carrusel Fotos Sof√≠a</title>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: transparent;
      }

      #music-btn {
        position: fixed;
        bottom: 16px;
        right: 16px;
        background: rgba(255, 182, 193, 0.9);
        border: none;
        border-radius: 24px;
        padding: 10px 14px;
        font-size: 14px;
        cursor: pointer;
      }

      .carousel {
        width: 100%;
        max-width: 800px;
        margin: auto;
        overflow: hidden;
        border-radius: 16px;
      }

      .slides {
        display: flex;
        gap: 12px;
      }

      .slide {
        flex: 0 0 calc(100% / 3);
        opacity: 0;
        transform: translateX(30px);
        transition: opacity 0.6s ease, transform 0.6s ease;
      }

      .slide.active {
        opacity: 1;
        transform: translateX(0);
      }

      .slides img {
        width: 100%;
        height: auto;
        object-fit: contain;
        border-radius: 12px;
      }

      /* Tablet */
      @media (max-width: 900px) {
        .slide {
          flex: 0 0 calc(100% / 2);
        }
      }

      /* Mobile */
      @media (max-width: 600px) {
        .slide {
          flex: 0 0 100%;
        }
      }
    </style>
  </head>

  <body>
    <audio id="bg-music" preload="auto" loop>
      <source
        src="https://drive.google.com/uc?export=download&id=1iZ58SOSpBnUH9NxKiP3HCdKoplOxNpwT"
        type="audio/mpeg"
      />
    </audio>

    <!-- Bot√≥n -->
    <button id="music-btn">üéµ Activar m√∫sica</button>

    <div class="carousel">
      <div class="slides" id="slides"></div>
    </div>

    <!-- JS Carrusel -->
    <script>
      // ‚ö†Ô∏è ID DE LA CARPETA DE DRIVE
      const FOLDER_ID = "1AnA6dSldcoh65jl5ns7jxipW07Duz1t6";

      // API p√∫blica de Google Drive (sin auth, solo lectura)
      const API_KEY = "AIzaSyCqzg12Q3wHh_Z_WCxLDvRo6czcou1JNGE";

      const slidesContainer = document.getElementById("slides");

      let slides = [];
      let current = 0;
      let visible = 3;

      function updateVisible() {
        if (window.innerWidth < 600) visible = 1;
        else if (window.innerWidth < 900) visible = 2;
        else visible = 3;
      }

      window.addEventListener("resize", updateVisible);
      updateVisible();

      fetch(
        `https://www.googleapis.com/drive/v3/files?q='${FOLDER_ID}'+in+parents+and+mimeType+contains+'image/'&key=${API_KEY}&fields=files(id,name)`
      )
        .then((res) => res.json())
        .then((data) => {
          data.files.forEach((file) => {
            const div = document.createElement("div");
            div.className = "slide";

            const img = document.createElement("img");
            img.src = `https://drive.google.com/thumbnail?id=${file.id}&sz=w1200`;
            img.alt = file.name;

            div.appendChild(img);
            slidesContainer.appendChild(div);
            slides.push(div);
          });

          showSlides();
          setInterval(nextSlide, 3000);
        });

      function showSlides() {
        slides.forEach((slide) => slide.classList.remove("active"));

        for (let i = 0; i < visible; i++) {
          const index = (current + i) % slides.length;
          slides[index].classList.add("active");
        }
      }

      function nextSlide() {
        current = (current + 1) % slides.length;
        showSlides();
      }
    </script>

    <!-- JS M√∫sica -->
    <script>
      const audio = document.getElementById("bg-music");
      const btn = document.getElementById("music-btn");

      btn.addEventListener("click", () => {
        if (audio.paused) {
          audio.play();
          btn.textContent = "üîá Pausar m√∫sica";
        } else {
          audio.pause();
          btn.textContent = "üéµ Activar m√∫sica";
        }
      });
    </script>
  </body>
</html>
