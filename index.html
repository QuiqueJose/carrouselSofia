<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carrusel Fotos Sof√≠a</title>

    <style>
      body {
        position: relative;
        margin: 0;
        font-family: Arial, sans-serif;
        background: transparent;
      }

      /* ===== CARROUSEL ===== */
      .carousel {
        width: 100%;
        max-width: 900px;
        margin: 40px auto;
        overflow: hidden;
        border-radius: 20px;
      }

      .slides {
        display: flex;
        transition: transform 0.6s ease-in-out;
        will-change: transform;
      }

      .slide {
        flex: 0 0 33.3333%;
        padding: 4px;
        box-sizing: border-box;
      }

      .slide img {
        width: 100%;
        height: auto;
        border-radius: 14px;
        display: block;
      }

      /* Tablet */
      @media (max-width: 900px) {
        .slide {
          flex: 0 0 50%;
        }
      }

      /* Mobile */
      @media (max-width: 600px) {
        .slide {
          flex: 0 0 100%;
        }
      }
    </style>
  </head>

  <body>
    <!--Carrusel -->
    <div class="carousel">
      <div class="slides" id="slides"></div>
    </div>

    <!-- JS Carrusel -->
    <script>
      // ‚ö†Ô∏è ID DE LA CARPETA DE DRIVE
      const FOLDER_ID = "1AnA6dSldcoh65jl5ns7jxipW07Duz1t6";

      // API p√∫blica de Google Drive (sin auth, solo lectura)
      const API_KEY = "AIzaSyCqzg12Q3wHh_Z_WCxLDvRo6czcou1JNGE";

      const slidesContainer = document.getElementById("slides");

      let slideWidth = 0;
      let index = 0;

      function updateSlideWidth() {
        const firstSlide = document.querySelector(".slide");
        if (firstSlide) {
          slideWidth = firstSlide.offsetWidth;
        }
      }

      window.addEventListener("resize", updateSlideWidth);

      fetch(
        `https://www.googleapis.com/drive/v3/files?q='${FOLDER_ID}'+in+parents+and+mimeType+contains+'image/'&key=${API_KEY}&fields=files(id,name)`
      )
        .then((res) => res.json())
        .then((data) => {
          data.files.forEach((file) => {
            const slide = document.createElement("div");
            slide.className = "slide";

            const img = document.createElement("img");
            img.src = `https://drive.google.com/thumbnail?id=${file.id}&sz=w1200`;
            img.alt = file.name;

            slide.appendChild(img);
            slidesContainer.appendChild(slide);
          });

          // üîÅ duplicamos slides para loop infinito
          slidesContainer.innerHTML += slidesContainer.innerHTML;

          updateSlideWidth();

          setInterval(() => {
            index++;
            slidesContainer.style.transform = `translateX(-${
              index * slideWidth
            }px)`;

            // reinicio invisible
            if (index >= slidesContainer.children.length / 2) {
              setTimeout(() => {
                slidesContainer.style.transition = "none";
                index = 0;
                slidesContainer.style.transform = "translateX(0)";
                slidesContainer.offsetHeight; // reflow
                slidesContainer.style.transition = "transform 0.6s ease-in-out";
              }, 700);
            }
          }, 3000);
        });
    </script>
  </body>
</html>
